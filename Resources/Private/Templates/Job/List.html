<f:layout name="Default" />

<f:section name="Title">A list of jobs</f:section>

<f:section name="Content">
	<f:if condition="{jobs}">
		<f:then>
			<table class="table table-striped">
				<f:for each="{jobs}" as="job">
					<tr>
						<td><f:link.action action="index" arguments="{job: job}">{job.command}</f:link.action></td>
						<td>{job.status}</td>
						<td>{job.createDate -> f:format.date(format: 'd.m.Y H:i:s')}</td>
						<td><f:form action="index" arguments="{job: job}">
							<f:form.hidden name="__method" value="DELETE" />
							<f:form.submit value="Delete" class="btn btn-danger btn-xs" />
						</f:form></td>
					</tr>
				</f:for>
			</table>
		</f:then>
		<f:else>
			<div class="alert alert-info" role="alert">No jobs created yet.</div>
		</f:else>
	</f:if>
	
	<h3>create new job</h3>
	<f:form action="index" objectName="job">
		<input type="hidden" name="__method" value="POST" />
			<div class="form-group">
				<label class="control-label" for="command">Command</label>
							<f:form.textfield property="command" class="form-control" id="command" />
			</div>
			<div class="form-group">
				<f:form.submit value="Create" class="btn btn-default"/>
			</div>
	</f:form>

</f:section>

